<!DOCTYPE html>
<html>
<head>
    <title>Nested Formsets</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".add-formset").click(function () {
                var formset = $(this).closest(".formset");
                var newForm = formset.find(".formset-form:last").clone();
                newForm.find(":input").val("").removeAttr("checked").removeAttr("selected");
                formset.append(newForm);
            });
        });
    </script>
</head>
<body>
<form method="post" action="{% url 'home' %}">
    {% csrf_token %}
    {{ haushaltsplan_form.as_p }}

    <table>
        {{ formset.management_form }}
        {% for form in formset %}
            {{ form.as_table }}
        {% endfor %}
    </table>

    <button type="submit">Save</button>
</form>


<script>
    $(".formset").each(function () {
        var addButton = '<button type="button" class="add-formset">Add ' + $(this).find('.formset-form:first').data('name') + '</button>';
        $(this).append(addButton);
    });
</script>
</body>
</html>
